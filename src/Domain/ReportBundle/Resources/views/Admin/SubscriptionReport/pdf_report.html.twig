<head>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/sonataadmin/vendor/bootstrap/dist/css/bootstrap.min.css', null, true) }}">
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/sonataadmin/vendor/AdminLTE/css/AdminLTE.css', null, true) }}">
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/oxasonataadmin/css/admin.css', null, true) }}">
</head>

<div>
    {{ 'export.title.subscription_report'|trans({}, 'AdminReportBundle') }}
</div>

<br>

<div class="box box-primary box-pdf">
    <table class="table table-bordered table-striped">
        <thead>
            <tr class="sonata-ba-list-field-header">
                <th colspan="2" class="export-date-period">
                    {{ 'export.date_period'|trans({}, 'AdminReportBundle') }}
                </th>
            </tr>
        </thead>
        <tbody>
        <tr>
            <td class="sonata-ba-list-field sonata-ba-list-field-string">
                {{ 'export.start_date'|trans({}, 'AdminReportBundle') }}
            </td>
            <td class="sonata-ba-list-field sonata-ba-list-field-string">
                {{ 'export.end_date'|trans({}, 'AdminReportBundle') }}
            </td>
        </tr>
        <tr>
            <td class="sonata-ba-list-field sonata-ba-list-field-string">
                {{ subscriptionData['dates']|first }}
            </td>
            <td class="sonata-ba-list-field sonata-ba-list-field-string">
                {{ subscriptionData['dates']|last }}
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div class="box box-primary box-pdf">
    <table class="table table-bordered table-striped">
        <thead>
            <tr class="sonata-ba-list-field-header">
                <th>
                    {{ 'list.label_date'|trans({}, 'AdminReportBundle') }}
                </th>

                {% for subscription in subscriptionData['subscription_total_quantities'] %}
                    <th class="sonata-ba-list-field-header sonata-ba-list-field-header-order">
                        {{ subscription['name'] }}
                    </th>
                {% endfor %}

                <th>
                    {{ 'list.label_total'|trans({}, 'AdminReportBundle') }}
                </th>
            </tr>
        </thead>

        <tbody>
        {% for object in results %}
            <tr>
                <td class="sonata-ba-list-field sonata-ba-list-field-string">
                    {{ object.date|date('d.m.Y') }}
                </td>

                {% for subscriptionReportSubscription in object.subscriptionReportSubscriptions %}
                    <td class="sonata-ba-list-field sonata-ba-list-field-string">
                        {{ subscriptionReportSubscription.quantity }}
                    </td>
                {% endfor %}

                <td class="sonata-ba-list-field sonata-ba-list-field-string">
                    {{ object.total }}
                </td>
            </tr>
        {% endfor %}
        <tr class="list-subscription-report-total">
            <td class="sonata-ba-list-field sonata-ba-list-field-string">
                {{ 'list.label_total'|trans({}, 'AdminReportBundle') }}
            </td>

            {% for subscription in subscriptionData['subscription_total_quantities'] %}
                <td class="sonata-ba-list-field sonata-ba-list-field-string">
                    {{ subscription['quantity'] }}
                </td>
            {% endfor %}

            <td class="sonata-ba-list-field sonata-ba-list-field-string">
                {{ subscriptionData['total_quantity'] }}
            </td>
        </tr>
        </tbody>
    </table>
</div>
