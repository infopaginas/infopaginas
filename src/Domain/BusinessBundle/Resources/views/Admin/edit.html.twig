{% extends 'OxaSonataAdminBundle:CRUD:edit.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/oxasonataadmin/css/lib/selectize.css') }}">
{% endblock %}

{% block sonata_admin_content_actions_wrappers %}
    {{ parent() }}

    <ul class="nav navbar-nav navbar-right">
        <li class="dropdown sonata-actions header-form-buttons">
            <button type="submit" class="btn btn-success" form="business_form_{{ form.vars.id }}" name="btn_header_update">
                <i class="fa fa-save" aria-hidden="true"></i>
                {% if admin.id(object) is not null %}
                    {{ 'btn_update_and_edit_again'|trans({}, 'SonataAdminBundle') }}
                {% else %}
                    {{ 'btn_create_and_edit_again'|trans({}, 'SonataAdminBundle') }}
                {% endif %}
            </button>
        </li>
    </ul>
{% endblock %}

{% block sonata_form_attributes %}
    id="business_form_{{ form.vars.id }}"
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        var formId = '{{ form.vars.id }}';
        var parentId = '{{ app.request.get('id', null) }}';
        var businessProfileId = '{{ form.vars.value.id }}';
        var currentLocale = '{{ form.vars.value.locale }}';
        var errorList = {
            'keyword':{
                'minLength': '{{ 'business_profile.keywords.min_length'|trans({'{{ limit }}': KEYWORD_VALIDATION.MIN_LENGTH}, 'validators') }}',
                'maxLength': '{{ 'business_profile.keywords.max_length'|trans({'{{ limit }}': KEYWORD_VALIDATION.MAX_LENGTH}, 'validators') }}',
                'notBlank': '{{ 'business_profile.keywords.not_blank'|trans({}, 'validators') }}',
                'oneWord': '{{ 'business_profile.keywords.one_word'|trans({}, 'validators') }}'
            },
            'phones': {
                'not_unique': '{{ 'business_profile_phone.not_unique_main'|trans({}, 'validators') }}',
                'no_main': '{{ 'business_profile_phone.no_main'|trans({}, 'validators') }}'
            },
            'map': {
                'pin_not_moved': '{{ 'business_profile.map.pin_not_moved'|trans({}, 'validators') }}'
            },
            'address': {
                'confirm_address_update': '{{ 'business_profile.address.confirm_address_update'|trans({}, 'validators') }}'
            }
        };
        var validators = {
            'keyword':{
                'oneWord': {{ validators.keyword.one_word }}
            }
        };
        var spinnerLink = '{{ asset('assets/images/spinner-empty-background.gif') }}';
    </script>
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    {% include ':widgets:fos_js_routing.html.twig' %}
    <script type="text/javascript" src="{{ asset('bundles/domainbusiness/scripts/modules/businessProfileAdmin.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/domainsite/scripts/vendors/jquery.maskedinput.min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/domainsite/scripts/modules/sonataCollectionRemove.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/domainsite/scripts/vendors/min/selectize-min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/oxasonatamedia/galleryCollection.js')}}"></script>
{% endblock %}
